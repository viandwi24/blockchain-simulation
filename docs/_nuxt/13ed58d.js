(window.webpackJsonp=window.webpackJsonp||[]).push([[9,5,16],{302:function(t,e,n){"use strict";n.r(e);var o=n(62),r=Object(o.c)({props:{text:{type:String,default:""}},setup:function(){}}),c=n(61),component=Object(c.a)(r,(function(){var t=this,e=t.$createElement;return(t._self._c||e)("button",{staticClass:"shadow bg-blue-500 hover:bg-blue-400 focus:shadow-outline focus:outline-none text-white font-bold py-2 px-4 rounded",attrs:{type:"button"}},[t._v("\n  "+t._s(t.text)+"\n")])}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{Button:n(302).default})},304:function(t,e,n){var o=n(310),r=[],c=[],l={add:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];r.push(e),c.forEach((function(t){return t.apply(void 0,e)}))},addListener:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){};c.push(t),r.forEach((function(e){t.apply(void 0,o(e))}))}};t.exports=l},305:function(t,e,n){var o=n(214),r=n(215);n(14),n(74);var c=n(313),l=n(216),d=n(306).SignatureGenerator,v=function(){"use strict";function t(e,n,r){var c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:l();o(this,t),this.fromAddress=e,this.toAddress=n,this.amount=parseInt(r),this.timestamp=l(c).unix()}return r(t,[{key:"calculateHash",value:function(){var pattern=this.fromAddress+this.toAddress+this.amount;return c(pattern).toString()}},{key:"sign",value:function(t){var e=new d(t).fromPrivate(t);if(e.getAddress()!==this.fromAddress)throw new Error("Invalid signing key");return this.signature=e.generate(this.calculateHash()),this}},{key:"isValid",value:function(){return!(!this.fromAddress||!this.toAddress)&&(!!this.signature&&(!!(new d).fromPublic(this.fromAddress).verify(this.calculateHash(),this.signature)||(console.log({hash:this.calculateHash(),signature:this.signature}),!1)))}}]),t}();t.exports=v},306:function(t,e,n){var o=n(214),r=n(215),c=n(318),l=function(){"use strict";function t(){o(this,t)}return r(t,[{key:"generate",value:function(){var t=new c.ec("secp256k1").genKeyPair();return{privateKey:t.getPrivate("hex"),publicKey:t.getPublic("hex")}}}]),t}(),d=function(){"use strict";function t(){o(this,t),this.key=void 0}return r(t,[{key:"fromPrivate",value:function(t){return this.key=new c.ec("secp256k1").keyFromPrivate(t,"hex"),this}},{key:"fromPublic",value:function(t){return this.key=new c.ec("secp256k1").keyFromPublic(t,"hex"),this}},{key:"getAddress",value:function(){return this.key?this.key.getPublic("hex"):void 0}},{key:"generate",value:function(t){return this.key.sign(t,"base64").toDER("hex")}},{key:"verify",value:function(t,e){return this.key.verify(t,e)}}]),t}();e.KeyGenerator=l,e.SignatureGenerator=d},309:function(t,e,n){var o=n(214),r=n(215);n(14),n(74),n(34),n(217),n(50);var c=n(313),l=n(216),d=n(304),v=function(){"use strict";function t(data,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";o(this,t),this.data=data,this.timestamp=l(e).unix(),this.hash=void 0,this.previousHash=n,this.hash=this.calculateHash(),this.nonce=0,this.options={log:!0}}return r(t,[{key:"calculateHash",value:function(){var t=JSON.stringify(this.data),pattern=this.previousHash+this.timestamp+this.nonce+t;return c(pattern).toString()}},{key:"mine",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2;return new Promise((function(n,o){for(var r=Date.now();t.hash.slice(0,e)!=="0".repeat(e);){var c=Date.now();t.nonce++,t.hash=t.calculateHash();var l=Math.floor((c-r)/1e3);t.options.log&&console.log("[Block] Mining Block - generate hash and found ".concat(t.hash," | ").concat(l,"s | nonce ").concat(t.nonce))}var time=(Date.now()-r)/1e3;t.options.log&&(console.log("[Block] Mining Block - Success in ".concat(time,"s with nonce ").concat(t.nonce)),d.add("[Block] Mining Block - Success in ".concat(time,"s with nonce ").concat(t.nonce))),n(t)}))}}]),t}();t.exports=v},310:function(t,e,n){var o=n(311),r=n(219),c=n(147),l=n(312);t.exports=function(t){return o(t)||r(t)||c(t)||l()},t.exports.default=t.exports,t.exports.__esModule=!0},311:function(t,e,n){var o=n(218);t.exports=function(t){if(Array.isArray(t))return o(t)},t.exports.default=t.exports,t.exports.__esModule=!0},312:function(t,e){t.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},t.exports.default=t.exports,t.exports.__esModule=!0},317:function(t,e){},319:function(t,e){},320:function(t,e){},361:function(t,e,n){"use strict";n.r(e);var o=n(6),r=(n(49),n(63),n(14),n(34),n(217),n(50),n(62)),c=n(148),l=n(216),d=n.n(l),v=n(304),f=n.n(v),h=n(305),x=n.n(h),m=n(309),_=n.n(m),y=Object(r.c)({props:{blockchain:{type:Object,required:!0},wallets:{type:Array,required:!0}},setup:function(t,e){e.emit;var n=Object(r.j)(),l=n.$sleep,v=n.$t,h=t.blockchain,m=t.wallets,y=Object(r.a)((function(){return h.pendingTransactions})),k=Object(r.h)(!1),w=Object(r.h)(!1),C=Object(r.g)({hash:"...",nonce:"...",timestamp:"...",elapsedTime:"...",payload:[]}),$=function(){var t=Object(o.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return document.querySelector(".panel-pending-transaction").setAttribute("mining","0"),w.value=!0,k.value=!0,console.clear(),t.next=6,l(1e3);case 6:A().finally((function(){k.value=!1,document.querySelector(".panel-pending-transaction").setAttribute("mining","1")}));case 7:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),A=function(){var t=Object(o.a)(regeneratorRuntime.mark((function t(){var e,n,o,r,c,v,y,time;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=m[0].publicKey,f.a.add("[Blockchain] Starting mining with miner ".concat(e)),h.addTransaction(new x.a(h.system.publicKey,e,h.blockMineReward).sign(h.system.privateKey)),(n=new _.a(h.pendingTransactions,d()().toDate())).previousHash=h.getLastBlock().hash,C.payload=JSON.stringify(n.data),o=Date.now(),r=h.blockProofOfWorkDifficulty;case 8:if(n.hash.slice(0,r)==="0".repeat(r)){t.next=23;break}return t.next=11,l(5);case 11:c=Date.now(),n.nonce++,n.timestamp=d()().unix(),n.hash=n.calculateHash(),v=Math.floor((c-o)/1e3),console.log("[Block] Mining Block - generate hash and found ".concat(n.hash," | ").concat(v,"s | nonce ").concat(n.nonce)),C.nonce=n.nonce,C.hash=n.hash,C.timestamp=n.timestamp,C.elapsedTime=v,t.next=8;break;case 23:return y=Date.now(),time=(y-o)/1e3,console.log("[Block] Mining Block - Success in ".concat(time,"s with nonce ").concat(n.nonce)),f.a.add("[Block] Mining Block - Success in ".concat(time,"s with nonce ").concat(n.nonce)),h.chain.push(n),h.pendingTransactions=[],f.a.add("[Blockchain] Mining complete"),t.next=32,l(1e3);case 32:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return{openDialog:function(){var t=new c.a.Tour({useModalOverlay:!0,defaultStepOptions:{cancelIcon:{enabled:!0},classes:"shepherd-theme-square"}});t.addStep({title:v("components.pending.dialog.title"),text:v("components.pending.dialog.text"),buttons:[{text:v("components.pending.dialog.prev"),classes:"shepherd-button-secondary",action:function(){return this.hide()}},{text:v("components.pending.dialog.next"),action:function(){return setTimeout((function(){return $()}),500),this.hide()}}]}),t.start()},startMining:$,pendingTransactions:y,loading:k,visualizer:C,showVisualizer:w}}}),k=y,w=n(61),component=Object(w.a)(k,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"relative"},[t.showVisualizer?n("div",{staticClass:"panel-visualizer-mining rounded pt-4 overflow-hidden flex flex-col mb-4 bg-gray-50"},[n("div",{staticClass:"px-4 flex flex-col justify-between"},[n("div",{staticClass:"text-2xl font-semibold"},[t._v("\n        "+t._s(t.$t("components.pending.visualizer.title"))+"\n        "),t.loading?n("span",{staticClass:"text-xs"},[t._v("Running...")]):n("span",{staticClass:"text-xs"},[t._v("Finished...")])]),t._v(" "),n("div",{staticClass:"py-4 flex flex-col lg:flex-row"},[n("div",{staticClass:"blocks transition-all duration-300 relative flex flex-row"},[n("div",{staticClass:"\n              transition-all duration-300 cursor-pointer\n              block-chain relative rounded border-2 border-gray-500\n              hover:border-blue-500\n            "},[n("div",{staticClass:"title py-2 px-3 font-semibold border-b border-gray-500"},[t._v("\n              "+t._s(t.$t("components.pending.visualizer.newBlockCandidate"))+"\n            ")]),t._v(" "),n("div",{staticClass:"text-sm p-2 border-b border-gray-500"},[n("div",{staticClass:"mb-2"},[n("div",{staticClass:"font-semibold"},[t._v(t._s(t.$t("components.blocks.block.previousBlockHash")))]),t._v(" "),n("div",{staticClass:"text-purple-600"},[n("span",{staticClass:"break-words"},[t._v("\n                    "+t._s(t.blockchain.getLastBlock().previousHash)+"\n                  ")])])]),t._v(" "),n("div",{staticClass:"mb-2"},[n("div",{staticClass:"font-semibold"},[t._v(t._s(t.$t("components.blocks.block.hash")))]),t._v(" "),n("div",{staticClass:"text-pink-600"},[n("span",{staticClass:"break-words"},[t._v("\n                    "+t._s(t.visualizer.hash)+"\n                  ")])])])]),t._v(" "),n("div",{staticClass:"text-sm p-2"},[n("div",{},[n("div",{staticClass:"font-semibold"},[t._v(t._s(t.$t("components.blocks.block.nonce")))]),t._v(" "),n("div",{staticClass:"text-pink-600"},[n("span",{staticClass:"break-words"},[t._v("\n                    "+t._s(t.visualizer.nonce)+"\n                  ")])])])])])]),t._v(" "),n("div",{staticClass:"flex-1 flex py-4 pr-8"},[n("table",{staticClass:"md:table flex-1 text-xs"},[n("tr",{staticClass:"flex flex-col md:flex-row md:space-x-4 mb-2"},[n("th",{staticClass:"md:w-2/12 text-left md:text-right"},[t._v("\n                "+t._s(t.$t("components.pending.visualizer.powDifficulty"))+"\n              ")]),t._v(" "),n("td",{staticClass:"md:w-10/12 text-left"},[t._v("\n                "+t._s(t.blockchain.blockProofOfWorkDifficulty)+"\n                (\n                  "),t._l(parseInt(t.blockchain.blockProofOfWorkDifficulty),(function(i){return n("span",{key:i,staticClass:"text-red-500"},[t._v("0")])})),n("span",{staticClass:"text-purple-500"},[t._v("RANDOMHASH")]),t._v("\n                )\n              ")],2)]),t._v(" "),n("tr",{staticClass:"flex flex-col md:flex-row md:space-x-4 mb-2"},[n("th",{staticClass:"md:w-2/12 text-left md:text-right"},[t._v("\n                "+t._s(t.$t("components.pending.visualizer.hashRules"))+"\n              ")]),t._v(" "),t._m(0)]),t._v(" "),n("tr",{staticClass:"flex flex-col md:flex-row md:space-x-4 mb-2"},[n("th",{staticClass:"md:w-2/12 text-left md:text-right"},[t._v("\n                "+t._s(t.$t("components.pending.visualizer.timeElapsed"))+"\n              ")]),t._v(" "),n("td",{staticClass:"md:w-10/12 text-left"},[t._v(t._s(t.visualizer.elapsedTime)+"s")])]),t._v(" "),n("tr",{staticClass:"flex flex-col md:flex-row md:space-x-4 mb-2"},[n("th",{staticClass:"md:w-2/12 text-left md:text-right"},[t._v("\n                Payload\n              ")]),t._v(" "),n("td",{staticClass:"md:w-10/12 text-left"},[n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.visualizer.payload,expression:"visualizer.payload"}],staticClass:"\n                    w-full px-4 py-2\n                    border-2 border-purple-500\n                  ",attrs:{readonly:"",disabled:"true",rows:"10"},domProps:{value:t.visualizer.payload},on:{input:function(e){e.target.composing||t.$set(t.visualizer,"payload",e.target.value)}}})])])])])])])]):t._e(),t._v(" "),n("div",{staticClass:"panel-pending-transaction relative rounded pt-4 overflow-hidden flex flex-col bg-gray-50"},[n("div",{staticClass:"px-4 flex flex-col justify-between"},[n("div",{staticClass:"text-2xl font-semibold"},[t._v("\n        "+t._s(t.$t("components.pending.title"))+"\n      ")]),t._v(" "),n("div",{staticClass:"pt-1 text-xs text-gray-500"},[t._v("\n        "+t._s(t.$t("components.pending.description"))+"\n      ")]),t._v(" "),t.loading?t._e():n("div",{staticClass:"relative py-4 flex flex-col"},[0===t.pendingTransactions.length?n("div",[t._v("\n          "+t._s(t.$t("components.pending.noTransactions"))+"\n        ")]):t._e(),t._v(" "),t._l(t.pendingTransactions,(function(e,i){return n("div",{key:i,staticClass:"\n            rounded\n            text-gray-700 bg-gray-100 hover:bg-gray-200\n            px-4 py-2\n            flex flex-col md:flex-row space-x-4\n            mb-2\n            overflow-x-hidden\n          "},[n("div",{staticClass:"w-1/12 text-3xl text-center self-center text-blue-500"},[t._v("\n            "+t._s(i+1)+"\n          ")]),t._v(" "),n("div",{staticClass:"w-10/12 flex flex-col"},[n("div",{staticClass:"flex"},[n("div",{staticClass:"truncate font-semibold"},[t._v("\n                "+t._s(t.$t("other.from"))+" :\n                "),e.fromAddress===t.blockchain.system.publicKey?n("span",{staticClass:"text-blue-500"},[t._v("\n                  System\n                ")]):n("span",{staticClass:"text-gray-500"},[t._v("\n                  "+t._s(e.fromAddress)+"\n                ")])])]),t._v(" "),n("div",{staticClass:"flex"},[n("div",{staticClass:"truncate font-semibold"},[t._v("\n                "+t._s(t.$t("other.to"))+" :\n                "),n("span",{staticClass:"text-gray-500"},[t._v(t._s(e.toAddress))])])]),t._v(" "),n("div",{staticClass:"flex"},[n("div",{staticClass:"truncate font-semibold"},[t._v("\n                "+t._s(t.$t("other.amount"))+" :\n                "),n("span",{staticClass:"text-gray-500"},[t._v(t._s(e.amount)+" Coin")])])])]),t._v(" "),n("div",{staticClass:"w-1/12 text-3xl text-center self-center text-gray-400"},[n("font-awesome-icon",{staticClass:"text-gray-300",attrs:{icon:["fas","clock"]}})],1)])})),t._v(" "),0!==t.pendingTransactions.length?n("Button",{attrs:{text:t.$t("components.pending.startMining")},nativeOn:{click:function(e){return t.openDialog.apply(null,arguments)}}}):t._e()],2)]),t._v(" "),t.loading?n("div",{staticClass:"z-10 absolute top-0 left-0 w-full h-full bg-black text-gray-100 flex flex-col text-center justify-center"},[n("div",{staticClass:"text-center"},[n("font-awesome-icon",{attrs:{icon:["fas","circle-notch"],spin:""}})],1),t._v(" "),n("div",[t._v("\n        "+t._s(t.$t("components.pending.miningInProgress"))+"\n        "),n("div",{staticClass:"text-xs"},[t._v("\n          "+t._s(t.$t("components.pending.noteInProgress"))+"\n        ")])])]):t._e()])])}),[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("td",{staticClass:"md:w-10/12 text-left"},[n("span",{staticClass:"text-red-500"},[t._v("SHA256(")]),t._v(" "),n("span",{staticClass:"text-green-500"},[t._v("previousHash")]),t._v(" +\n                  "),n("span",{staticClass:"text-green-500"},[t._v("timestamp")]),t._v(" +\n                  "),n("span",{staticClass:"text-green-500"},[t._v("payload")]),t._v(" +\n                  "),n("span",{staticClass:"text-green-500"},[t._v("nonce")]),t._v(" "),n("span",{staticClass:"text-red-500"},[t._v(")")])])}],!1,null,null,null);e.default=component.exports;installComponents(component,{Button:n(302).default})}}]);